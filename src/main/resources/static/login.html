<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Login</title>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/json2.js"></script>
    <script src="js/jquery.form.min.js"></script>
    <link href="css/login.css" type="text/css" rel="stylesheet">
    <script>
        function login() {

        }
    function setStyle(point){
        var labels = document.getElementsByTagName("label");
        var input = document.getElementById("get_account");
        if(point.value === "loginname"){
            for(var i=0;i<labels.length;i++){
                if(labels[i].getAttribute("for")==="get_account"){
                    labels[i].firstChild.nodeValue = "登录名：";
                }
            }
            input.setAttribute("name","loginname")
            input.setAttribute("type","text");
        }
        if(point.value === "email"){
            for(var i=0;i<labels.length;i++){
                if(labels[i].getAttribute("for")==="get_account"){
                    labels[i].firstChild.nodeValue = "邮箱号：";

                }
            }
            input.setAttribute("name","email");
            input.setAttribute("type","email");
        }
    }
    function chooseLoginStyle(){
        var inputs = document.getElementsByName("login");
        for(var i=0;i<inputs.length;i++){
            inputs[i].setAttribute("onclick","setStyle(this)");
        }
    }

    $(document).ready(function () {
        $("#form").ajaxForm({
            url:"login",
            type:"post",
            asyns:false,
            success:function (data) {
                if(data["code"] === 200){
                    window.location.replace("/");
                }else{
                    alert(data["message"]);
                }
            }
            })
    })
    window.onload=chooseLoginStyle;
    </script>

</head>
<body>
        <form id="form" method="post" action="login">
            <h1>登录</h1>
            <div id="type">
                <label>
                    <input type="radio" name="login" value="loginname" checked>
                </label> 登录名登录
                <label>
                    <input type="radio" name="login" value="email">
                </label> 邮箱登录
            </div>
            <fieldset>
                <p>
                    <label for="get_account">登录名：</label>
                    <input type="text" id="get_account" name="loginname"/>
                </p>
                <p>
                    <label for="get_password">密码：</label>
                    <input type="password" id="get_password" name="password"/>
                </p>
            </fieldset>
            <div id="form_btn1" ><input type="submit" ></div>
        </form>
        <button id="main_btn" type="button" onclick="location.href='register.html'">注册</button>
</body>
</html>